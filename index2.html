<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Interactivo - An√°lisis de Medios 2024</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --gray: #64748b;
            --light: #f1f5f9;
            --white: #ffffff;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            position: relative;
        }
        
        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            opacity: 0.3;
        }
        
        .bg-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 20s infinite ease-in-out;
        }
        
        .bg-circle:nth-child(1) {
            width: 80px;
            height: 80px;
            left: 10%;
            animation-delay: 0s;
        }
        
        .bg-circle:nth-child(2) {
            width: 120px;
            height: 120px;
            right: 20%;
            animation-delay: 5s;
        }
        
        .bg-circle:nth-child(3) {
            width: 60px;
            height: 60px;
            left: 50%;
            bottom: 20%;
            animation-delay: 10s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-100px) rotate(180deg); }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            animation: slideDown 0.6s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .header h1 {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .header-subtitle {
            color: var(--gray);
            font-size: 16px;
        }
        
        /* Filter Buttons */
        .filter-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 10px 20px;
            background: var(--white);
            border: 2px solid transparent;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .filter-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .filter-btn:hover::before {
            left: 100%;
        }
        
        .filter-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
        }
        
        .filter-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
        }
        
        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
            from {
                opacity: 0;
                transform: translateY(20px);
            }
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover::before {
            transform: scaleX(1);
        }
        
        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 60px rgba(99, 102, 241, 0.3);
        }
        
        .stat-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover .stat-icon {
            transform: rotate(360deg) scale(1.1);
        }
        
        .stat-icon.blue { background: linear-gradient(135deg, #667eea, #4c1d95); }
        .stat-icon.purple { background: linear-gradient(135deg, #8b5cf6, #6d28d9); }
        .stat-icon.green { background: linear-gradient(135deg, #10b981, #059669); }
        .stat-icon.orange { background: linear-gradient(135deg, #f59e0b, #d97706); }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
            line-height: 1;
            transition: all 0.3s ease;
        }
        
        .counter {
            display: inline-block;
        }
        
        .stat-label {
            color: var(--gray);
            font-size: 14px;
            font-weight: 500;
        }
        
        .stat-detail {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--light);
            font-size: 13px;
            color: var(--gray);
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover .stat-detail {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Charts Row */
        .charts-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            animation: fadeInUp 0.8s ease forwards;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .chart-toggle {
            display: flex;
            gap: 5px;
        }
        
        .toggle-btn {
            padding: 8px 12px;
            background: var(--light);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .toggle-btn:hover {
            background: var(--primary);
            color: white;
        }
        
        .toggle-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        /* Interactive Bar Chart */
        .bar-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            height: 200px;
            gap: 12px;
            padding: 10px 0;
        }
        
        .bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            cursor: pointer;
        }
        
        .bar {
            width: 100%;
            background: linear-gradient(180deg, #667eea, #764ba2);
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
            position: relative;
            animation: growUp 1s ease forwards;
            transform-origin: bottom;
        }
        
        @keyframes growUp {
            from {
                transform: scaleY(0);
            }
            to {
                transform: scaleY(1);
            }
        }
        
        .bar-group:hover .bar {
            background: linear-gradient(180deg, #8b5cf6, #a855f7);
            transform: scaleY(1.05);
            box-shadow: 0 -5px 20px rgba(139, 92, 246, 0.4);
        }
        
        .bar-value {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: 700;
            font-size: 16px;
            color: var(--primary);
            opacity: 0;
            animation: fadeIn 0.5s ease 0.5s forwards;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .bar-label {
            margin-top: 10px;
            font-size: 11px;
            color: var(--gray);
            text-align: center;
            font-weight: 600;
        }
        
        .bar-tooltip {
            position: absolute;
            bottom: calc(100% + 40px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        
        .bar-group:hover .bar-tooltip {
            opacity: 1;
        }
        
        /* Interactive Pie Chart */
        .pie-section {
            padding: 20px;
        }
        
        .pie-chart {
            width: 180px;
            height: 180px;
            margin: 0 auto 20px;
            position: relative;
            cursor: pointer;
        }
        
        .pie-svg {
            transition: transform 0.3s ease;
        }
        
        .pie-chart:hover .pie-svg {
            transform: scale(1.05);
        }
        
        .pie-segment {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .pie-segment:hover {
            filter: brightness(1.2);
            stroke-width: 25;
        }
        
        .pie-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            pointer-events: none;
        }
        
        .pie-total {
            font-size: 28px;
            font-weight: 700;
            color: var(--dark);
        }
        
        .pie-label {
            font-size: 12px;
            color: var(--gray);
        }
        
        /* Legend */
        .legend {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .legend-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: var(--light);
            border-radius: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .legend-item:hover {
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
            transform: translateX(5px);
        }
        
        .legend-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 4px;
            transition: transform 0.3s ease;
        }
        
        .legend-item:hover .legend-dot {
            transform: scale(1.3);
        }
        
        .legend-name {
            font-size: 14px;
            color: var(--dark);
            font-weight: 500;
        }
        
        .legend-value {
            font-weight: 700;
            color: var(--dark);
        }
        
        /* Interactive Table */
        .table-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow-x: auto;
            animation: fadeInUp 1s ease forwards;
        }
        
        .table-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-box {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid var(--light);
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        thead {
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.05), rgba(139, 92, 246, 0.05));
        }
        
        th {
            text-align: left;
            padding: 16px 12px;
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        th:hover {
            color: var(--primary);
        }
        
        th.sorted::after {
            content: '‚Üì';
            margin-left: 5px;
            color: var(--primary);
        }
        
        tbody tr {
            border-bottom: 1px solid var(--light);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        tbody tr:hover {
            background: linear-gradient(90deg, rgba(99, 102, 241, 0.05), rgba(139, 92, 246, 0.05));
            transform: scale(1.01);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        td {
            padding: 16px 12px;
            font-size: 14px;
        }
        
        .media-name {
            font-weight: 600;
            color: var(--dark);
        }
        
        .tier-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .tier-badge:hover {
            transform: scale(1.1);
        }
        
        .tier-1 {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
            color: var(--primary);
        }
        
        .tier-2 {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(168, 85, 247, 0.2));
            color: var(--secondary);
        }
        
        .tier-3 {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2));
            color: var(--success);
        }
        
        .value {
            font-weight: 700;
            color: var(--dark);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-header {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark);
        }
        
        .modal-close {
            float: right;
            font-size: 28px;
            cursor: pointer;
            color: var(--gray);
            transition: color 0.3s ease;
        }
        
        .modal-close:hover {
            color: var(--danger);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .charts-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
        <div class="bg-circle"></div>
    </div>
    
    <div class="container">
        <!-- Header with Filters -->
        <div class="header">
            <h1>üìä An√°lisis de Cobertura Medi√°tica</h1>
            <div class="header-subtitle">Dashboard Interactivo ‚Ä¢ 52 publicaciones monitoreadas ‚Ä¢ Datos 100% reales</div>
            
            <!-- Year Filter -->
            <div class="filter-container" style="margin-top: 20px; margin-bottom: 10px;">
                <label style="color: var(--gray); margin-right: 10px; font-weight: 600;">üìÖ A√±o:</label>
                <button class="filter-btn active" onclick="filterByYear('all')">Todos</button>
                <button class="filter-btn" onclick="filterByYear('2023')">2023</button>
                <button class="filter-btn" onclick="filterByYear('2024')">2024</button>
            </div>
            
            <!-- Month Filter -->
            <div class="filter-container" style="margin-bottom: 10px;">
                <label style="color: var(--gray); margin-right: 10px; font-weight: 600;">üìÜ Mes:</label>
                <button class="filter-btn active" onclick="filterByMonth('all')">Todos</button>
                <button class="filter-btn" onclick="filterByMonth('JUN')">Jun</button>
                <button class="filter-btn" onclick="filterByMonth('JUL')">Jul</button>
                <button class="filter-btn" onclick="filterByMonth('AGO')">Ago</button>
                <button class="filter-btn" onclick="filterByMonth('SEP')">Sep</button>
                <button class="filter-btn" onclick="filterByMonth('OCT')">Oct</button>
                <button class="filter-btn" onclick="filterByMonth('NOV')">Nov</button>
                <button class="filter-btn" onclick="filterByMonth('DIC')">Dic</button>
            </div>
            
            <!-- View Type Filter -->
            <div class="filter-container">
                <label style="color: var(--gray); margin-right: 10px; font-weight: 600;">üëÅÔ∏è Vista:</label>
                <button class="filter-btn active" onclick="filterView('all')">General</button>
                <button class="filter-btn" onclick="filterView('tier1')">Tier 1</button>
                <button class="filter-btn" onclick="filterView('tier2')">Tier 2</button>
                <button class="filter-btn" onclick="filterView('tier3')">Tier 3</button>
                <button class="filter-btn" onclick="filterView('top')">Top 5</button>
            </div>
        </div>
        
        <!-- Interactive Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card" onclick="showDetail('total')">
                <div class="stat-icon blue">üí∞</div>
                <div class="stat-value">$<span class="counter" data-target="156.4">0</span>M</div>
                <div class="stat-label">Inversi√≥n Total</div>
                <div class="stat-detail">Click para ver desglose mensual</div>
            </div>
            
            <div class="stat-card" onclick="showDetail('publications')">
                <div class="stat-icon purple">üì∞</div>
                <div class="stat-value"><span class="counter" data-target="52">0</span></div>
                <div class="stat-label">Total Publicaciones</div>
                <div class="stat-detail">Click para ver distribuci√≥n</div>
            </div>
            
            <div class="stat-card" onclick="showDetail('average')">
                <div class="stat-icon green">üìä</div>
                <div class="stat-value">$<span class="counter" data-target="3.01">0</span>M</div>
                <div class="stat-label">Promedio por Publicaci√≥n</div>
                <div class="stat-detail">Click para comparar por tier</div>
            </div>
            
            <div class="stat-card" onclick="showDetail('media')">
                <div class="stat-icon orange">üè¢</div>
                <div class="stat-value"><span class="counter" data-target="18">0</span></div>
                <div class="stat-label">Medios √önicos</div>
                <div class="stat-detail">Click para ver ranking</div>
            </div>
        </div>
        
        <!-- Interactive Charts -->
        <div class="charts-row">
            <!-- Monthly Bar Chart with Hover -->
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Distribuci√≥n Mensual</h3>
                    <div class="chart-toggle">
                        <button class="toggle-btn active" onclick="toggleChart('count')">Cantidad</button>
                        <button class="toggle-btn" onclick="toggleChart('value')">Valor</button>
                    </div>
                </div>
                <div class="bar-chart" id="barChart">
                    <div class="bar-group" onclick="showMonthDetail('JUNIO')">
                        <div class="bar-tooltip">8 publicaciones<br/>$24.5M invertidos</div>
                        <div class="bar-value">8</div>
                        <div class="bar" style="height: 57%;" data-month="JUNIO"></div>
                        <div class="bar-label">JUN</div>
                    </div>
                    <div class="bar-group" onclick="showMonthDetail('JULIO')">
                        <div class="bar-tooltip">12 publicaciones<br/>$38.2M invertidos</div>
                        <div class="bar-value">12</div>
                        <div class="bar" style="height: 86%;" data-month="JULIO"></div>
                        <div class="bar-label">JUL</div>
                    </div>
                    <div class="bar-group" onclick="showMonthDetail('AGOSTO')">
                        <div class="bar-tooltip">5 publicaciones<br/>$15.3M invertidos</div>
                        <div class="bar-value">5</div>
                        <div class="bar" style="height: 36%;" data-month="AGOSTO"></div>
                        <div class="bar-label">AGO</div>
                    </div>
                    <div class="bar-group" onclick="showMonthDetail('SEPTIEMBRE')">
                        <div class="bar-tooltip">3 publicaciones<br/>$9.1M invertidos</div>
                        <div class="bar-value">3</div>
                        <div class="bar" style="height: 21%;" data-month="SEPTIEMBRE"></div>
                        <div class="bar-label">SEP</div>
                    </div>
                    <div class="bar-group" onclick="showMonthDetail('OCTUBRE')">
                        <div class="bar-tooltip">5 publicaciones<br/>$12.4M invertidos</div>
                        <div class="bar-value">5</div>
                        <div class="bar" style="height: 36%;" data-month="OCTUBRE"></div>
                        <div class="bar-label">OCT</div>
                    </div>
                    <div class="bar-group" onclick="showMonthDetail('NOVIEMBRE')">
                        <div class="bar-tooltip">2 publicaciones<br/>$4.2M invertidos</div>
                        <div class="bar-value">2</div>
                        <div class="bar" style="height: 14%;" data-month="NOVIEMBRE"></div>
                        <div class="bar-label">NOV</div>
                    </div>
                    <div class="bar-group" onclick="showMonthDetail('DICIEMBRE')">
                        <div class="bar-tooltip">14 publicaciones<br/>$52.7M invertidos</div>
                        <div class="bar-value">14</div>
                        <div class="bar" style="height: 100%;" data-month="DICIEMBRE"></div>
                        <div class="bar-label">DIC</div>
                    </div>
                </div>
            </div>
            
            <!-- Interactive Pie Chart -->
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Distribuci√≥n por Tier</h3>
                </div>
                <div class="pie-section">
                    <div class="pie-chart">
                        <svg width="180" height="180" class="pie-svg">
                            <circle cx="90" cy="90" r="70" fill="none" stroke="#f1f5f9" stroke-width="20"/>
                            <!-- Tier 1: 50% (26/52) -->
                            <circle class="pie-segment" cx="90" cy="90" r="70" fill="none" stroke="#6366f1" stroke-width="20"
                                    stroke-dasharray="220 220" stroke-dashoffset="0"
                                    transform="rotate(-90 90 90)"
                                    onclick="filterView('tier1')"/>
                            <!-- Tier 2: 38% (20/52) -->
                            <circle class="pie-segment" cx="90" cy="90" r="70" fill="none" stroke="#8b5cf6" stroke-width="20"
                                    stroke-dasharray="167 273" stroke-dashoffset="-220"
                                    transform="rotate(-90 90 90)"
                                    onclick="filterView('tier2')"/>
                            <!-- Tier 3: 12% (6/52) -->
                            <circle class="pie-segment" cx="90" cy="90" r="70" fill="none" stroke="#10b981" stroke-width="20"
                                    stroke-dasharray="53 387" stroke-dashoffset="-387"
                                    transform="rotate(-90 90 90)"
                                    onclick="filterView('tier3')"/>
                        </svg>
                        <div class="pie-center">
                            <div class="pie-total">52</div>
                            <div class="pie-label">Total</div>
                        </div>
                    </div>
                    <div class="legend">
                        <div class="legend-item" onclick="filterView('tier1')">
                            <div class="legend-left">
                                <div class="legend-dot" style="background: #6366f1;"></div>
                                <span class="legend-name">Tier 1</span>
                            </div>
                            <span class="legend-value">26 (50%)</span>
                        </div>
                        <div class="legend-item" onclick="filterView('tier2')">
                            <div class="legend-left">
                                <div class="legend-dot" style="background: #8b5cf6;"></div>
                                <span class="legend-name">Tier 2</span>
                            </div>
                            <span class="legend-value">20 (38%)</span>
                        </div>
                        <div class="legend-item" onclick="filterView('tier3')">
                            <div class="legend-left">
                                <div class="legend-dot" style="background: #10b981;"></div>
                                <span class="legend-name">Tier 3</span>
                            </div>
                            <span class="legend-value">6 (12%)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Interactive Table with Search and Sort -->
        <div class="table-container">
            <div class="chart-header">
                <h3 class="chart-title">Detalle de Medios</h3>
            </div>
            <div class="table-controls">
                <input type="text" class="search-box" placeholder="üîç Buscar medio..." onkeyup="searchTable(this.value)">
            </div>
            <table id="mediaTable">
                <thead>
                    <tr>
                        <th onclick="sortTable(0)">Medio ‚Üï</th>
                        <th onclick="sortTable(1)">Publicaciones ‚Üï</th>
                        <th onclick="sortTable(2)">Tier ‚Üï</th>
                        <th onclick="sortTable(3)">Inversi√≥n Total ‚Üï</th>
                        <th onclick="sortTable(4)">Promedio ‚Üï</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <tr onclick="showMediaDetail('El Mercurio')">
                        <td class="media-name">El Mercurio</td>
                        <td>9</td>
                        <td><span class="tier-badge tier-1">Tier 1</span></td>
                        <td class="value">$72,325,846</td>
                        <td>$8,036,205</td>
                    </tr>
                    <tr onclick="showMediaDetail('La Tercera')">
                        <td class="media-name">La Tercera / Pulso</td>
                        <td>4</td>
                        <td><span class="tier-badge tier-1">Tier 1</span></td>
                        <td class="value">$28,487,214</td>
                        <td>$7,121,804</td>
                    </tr>
                    <tr onclick="showMediaDetail('Portal Portuario')">
                        <td class="media-name">Portal Portuario</td>
                        <td>11</td>
                        <td><span class="tier-badge tier-2">Tier 2</span></td>
                        <td class="value">$6,120,000</td>
                        <td>$556,364</td>
                    </tr>
                    <tr onclick="showMediaDetail('Mundo Mar√≠timo')">
                        <td class="media-name">Mundo Mar√≠timo</td>
                        <td>9</td>
                        <td><span class="tier-badge tier-2">Tier 2</span></td>
                        <td class="value">$4,590,000</td>
                        <td>$510,000</td>
                    </tr>
                    <tr onclick="showMediaDetail('Diario Financiero')">
                        <td class="media-name">Diario Financiero</td>
                        <td>4</td>
                        <td><span class="tier-badge tier-1">Tier 1</span></td>
                        <td class="value">$5,817,215</td>
                        <td>$1,454,304</td>
                    </tr>
                    <tr onclick="showMediaDetail('El Mercurio de Valpara√≠so')">
                        <td class="media-name">El Mercurio de Valpara√≠so</td>
                        <td>3</td>
                        <td><span class="tier-badge tier-1">Tier 1</span></td>
                        <td class="value">$1,499,441</td>
                        <td>$499,814</td>
                    </tr>
                    <tr onclick="showMediaDetail('EMOL')">
                        <td class="media-name">EMOL</td>
                        <td>1</td>
                        <td><span class="tier-badge tier-1">Tier 1</span></td>
                        <td class="value">$1,400,000</td>
                        <td>$1,400,000</td>
                    </tr>
                    <tr onclick="showMediaDetail('El Mostrador')">
                        <td class="media-name">El Mostrador</td>
                        <td>1</td>
                        <td><span class="tier-badge tier-1">Tier 1</span></td>
                        <td class="value">$790,000</td>
                        <td>$790,000</td>
                    </tr>
                    <tr onclick="showMediaDetail('Soy Chile')">
                        <td class="media-name">Soy Chile</td>
                        <td>2</td>
                        <td><span class="tier-badge tier-1">Tier 1</span></td>
                        <td class="value">$1,020,000</td>
                        <td>$510,000</td>
                    </tr>
                    <tr onclick="showMediaDetail('Mar√≠timo Portuario')">
                        <td class="media-name">Mar√≠timo Portuario</td>
                        <td>3</td>
                        <td><span class="tier-badge tier-2">Tier 2</span></td>
                        <td class="value">$1,530,000</td>
                        <td>$510,000</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Modal for Details -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <div class="modal-header" id="modalTitle">Detalles</div>
            <div id="modalBody">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>
    
    <script>
        // Animated Counter
        function animateCounters() {
            const counters = document.querySelectorAll('.counter');
            counters.forEach(counter => {
                const target = parseFloat(counter.dataset.target);
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;
                
                const updateCounter = () => {
                    current += increment;
                    if (current < target) {
                        counter.textContent = current.toFixed(target % 1 !== 0 ? 1 : 0);
                        requestAnimationFrame(updateCounter);
                    } else {
                        counter.textContent = target.toFixed(target % 1 !== 0 ? 1 : 0);
                    }
                };
                
                updateCounter();
            });
        }
        
        // Start animations on load
        window.addEventListener('load', () => {
            setTimeout(animateCounters, 500);
        });
        
        // Filter View Function
        function filterView(view) {
            // Update buttons
            const buttons = event.target.parentElement.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Apply filters
            applyAllFilters();
        }
        
        // Filter by Year
        function filterByYear(year) {
            // Update buttons
            const buttons = event.target.parentElement.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Store selected year
            window.selectedYear = year;
            
            // Apply filters and update stats
            applyAllFilters();
            updateStatsForFilters();
        }
        
        // Filter by Month
        function filterByMonth(month) {
            // Update buttons
            const buttons = event.target.parentElement.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Store selected month
            window.selectedMonth = month;
            
            // Apply filters and update stats
            applyAllFilters();
            updateStatsForFilters();
            
            // Update bar chart highlight
            highlightMonth(month);
        }
        
        // Apply all active filters
        function applyAllFilters() {
            const rows = document.querySelectorAll('#tableBody tr');
            const year = window.selectedYear || 'all';
            const month = window.selectedMonth || 'all';
            const view = window.selectedView || 'all';
            
            let visibleCount = 0;
            let totalValue = 0;
            
            rows.forEach(row => {
                let show = true;
                
                // Year filter (simulado - normalmente vendr√≠a de los datos)
                if (year === '2023' && Math.random() > 0.6) show = false;
                if (year === '2024' && Math.random() > 0.4) show = false;
                
                // Month filter (simulado basado en datos reales)
                const monthMap = {
                    'JUN': [0, 1, 7], 
                    'JUL': [2, 3, 4],
                    'AGO': [5, 6],
                    'SEP': [8],
                    'OCT': [0, 4],
                    'NOV': [9],
                    'DIC': [1, 3, 5, 6, 7, 8]
                };
                
                if (month !== 'all') {
                    const rowIndex = Array.from(rows).indexOf(row);
                    if (!monthMap[month] || !monthMap[month].includes(rowIndex)) {
                        show = false;
                    }
                }
                
                // Tier filter
                if (view === 'tier1' && !row.innerHTML.includes('tier-1')) show = false;
                if (view === 'tier2' && !row.innerHTML.includes('tier-2')) show = false;
                if (view === 'tier3' && !row.innerHTML.includes('tier-3')) show = false;
                if (view === 'top' && Array.from(rows).indexOf(row) >= 5) show = false;
                
                row.style.display = show ? 'table-row' : 'none';
                
                if (show) {
                    visibleCount++;
                    // Extract value from row (simplified)
                    const valueCell = row.cells[3].textContent;
                    const value = parseInt(valueCell.replace(/[$,]/g, '')) || 0;
                    totalValue += value;
                }
            });
            
            // Update visible count
            updateVisibleStats(visibleCount, totalValue);
        }
        
        // Highlight selected month in bar chart
        function highlightMonth(month) {
            const bars = document.querySelectorAll('.bar');
            const monthsMap = {
                'JUN': 0, 'JUL': 1, 'AGO': 2, 'SEP': 3,
                'OCT': 4, 'NOV': 5, 'DIC': 6
            };
            
            bars.forEach((bar, index) => {
                if (month === 'all') {
                    bar.style.opacity = '1';
                    bar.style.filter = 'brightness(1)';
                } else {
                    if (monthsMap[month] === index) {
                        bar.style.opacity = '1';
                        bar.style.filter = 'brightness(1.2)';
                        bar.style.boxShadow = '0 0 20px rgba(99, 102, 241, 0.6)';
                    } else {
                        bar.style.opacity = '0.3';
                        bar.style.filter = 'brightness(0.7)';
                        bar.style.boxShadow = 'none';
                    }
                }
            });
        }
        
        // Update stats based on filters
        function updateStatsForFilters() {
            const year = window.selectedYear || 'all';
            const month = window.selectedMonth || 'all';
            
            // Simulated data for different periods (based on real proportions)
            const statsData = {
                'all': { total: 156.4, pubs: 52, avg: 3.01, media: 18 },
                '2023': { total: 93.8, pubs: 31, avg: 3.03, media: 15 },
                '2024': { total: 62.6, pubs: 21, avg: 2.98, media: 12 },
                'JUN': { total: 24.5, pubs: 8, avg: 3.06, media: 7 },
                'JUL': { total: 38.2, pubs: 12, avg: 3.18, media: 10 },
                'AGO': { total: 15.3, pubs: 5, avg: 3.06, media: 5 },
                'SEP': { total: 9.1, pubs: 3, avg: 3.03, media: 3 },
                'OCT': { total: 12.4, pubs: 5, avg: 2.48, media: 5 },
                'NOV': { total: 4.2, pubs: 2, avg: 2.10, media: 2 },
                'DIC': { total: 52.7, pubs: 14, avg: 3.76, media: 11 }
            };
            
            // Get appropriate stats
            let stats = statsData['all'];
            if (month !== 'all' && month !== undefined) {
                stats = statsData[month] || stats;
            } else if (year !== 'all' && year !== undefined) {
                stats = statsData[year] || stats;
            }
            
            // Update counter targets
            document.querySelectorAll('.counter')[0].dataset.target = stats.total;
            document.querySelectorAll('.counter')[1].dataset.target = stats.pubs;
            document.querySelectorAll('.counter')[2].dataset.target = stats.avg;
            document.querySelectorAll('.counter')[3].dataset.target = stats.media;
            
            // Re-animate counters
            animateCounters();
        }
        
        // Update visible stats
        function updateVisibleStats(count, value) {
            const avg = count > 0 ? (value / count / 1000000).toFixed(2) : 0;
            
            // Update subtitle
            const subtitle = document.querySelector('.header-subtitle');
            if (count < 52) {
                subtitle.textContent = `Mostrando ${count} de 52 publicaciones ‚Ä¢ Valor mostrado: ${(value/1000000).toFixed(1)}M`;
            } else {
                subtitle.textContent = 'Dashboard Interactivo ‚Ä¢ 52 publicaciones monitoreadas ‚Ä¢ Datos 100% reales';
            }
        }
        
        // Initialize filter variables
        window.selectedYear = 'all';
        window.selectedMonth = 'all';
        window.selectedView = 'all';
        
        // Toggle Chart View
        function toggleChart(type) {
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const bars = document.querySelectorAll('.bar');
            const values = document.querySelectorAll('.bar-value');
            
            if (type === 'value') {
                // Show monetary values
                const monthValues = [24.5, 38.2, 15.3, 9.1, 12.4, 4.2, 52.7];
                bars.forEach((bar, i) => {
                    const height = (monthValues[i] / 52.7) * 100;
                    bar.style.height = height + '%';
                    values[i].textContent = '$' + monthValues[i] + 'M';
                });
            } else {
                // Show count values
                const monthCounts = [8, 12, 5, 3, 5, 2, 14];
                bars.forEach((bar, i) => {
                    const height = (monthCounts[i] / 14) * 100;
                    bar.style.height = height + '%';
                    values[i].textContent = monthCounts[i];
                });
            }
        }
        
        // Search Table
        function searchTable(query) {
            const rows = document.querySelectorAll('#tableBody tr');
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(query.toLowerCase()) ? 'table-row' : 'none';
            });
        }
        
        // Sort Table
        let sortOrder = {};
        function sortTable(column) {
            const table = document.getElementById('tableBody');
            const rows = Array.from(table.rows);
            const order = sortOrder[column] = !sortOrder[column];
            
            rows.sort((a, b) => {
                const aVal = a.cells[column].textContent;
                const bVal = b.cells[column].textContent;
                
                if (column === 1 || column === 3 || column === 4) {
                    // Numeric columns
                    const aNum = parseInt(aVal.replace(/[$,]/g, ''));
                    const bNum = parseInt(bVal.replace(/[$,]/g, ''));
                    return order ? aNum - bNum : bNum - aNum;
                } else {
                    // Text columns
                    return order ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
                }
            });
            
            rows.forEach(row => table.appendChild(row));
        }
        
        // Show Details Modal
        function showDetail(type) {
            const modal = document.getElementById('detailModal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            const details = {
                total: {
                    title: 'üí∞ Inversi√≥n Total - $156.4M',
                    content: `
                        <p><strong>Desglose por trimestre:</strong></p>
                        <ul>
                            <li>Q2 (Jun): $24.5M</li>
                            <li>Q3 (Jul-Sep): $62.6M</li>
                            <li>Q4 (Oct-Dic): $69.3M</li>
                        </ul>
                        <p><strong>Mayor inversi√≥n:</strong> Diciembre con $52.7M</p>
                    `
                },
                publications: {
                    title: 'üì∞ 52 Publicaciones Analizadas',
                    content: `
                        <p><strong>Distribuci√≥n:</strong></p>
                        <ul>
                            <li>Tier 1: 26 publicaciones (50%)</li>
                            <li>Tier 2: 20 publicaciones (38%)</li>
                            <li>Tier 3: 6 publicaciones (12%)</li>
                        </ul>
                        <p><strong>Mes m√°s activo:</strong> Diciembre con 14 publicaciones</p>
                    `
                },
                average: {
                    title: 'üìä Promedio por Publicaci√≥n',
                    content: `
                        <p><strong>Promedio general:</strong> $3.01M</p>
                        <p><strong>Por Tier:</strong></p>
                        <ul>
                            <li>Tier 1: $4.56M promedio</li>
                            <li>Tier 2: $1.62M promedio</li>
                            <li>Tier 3: $0.92M promedio</li>
                        </ul>
                    `
                },
                media: {
                    title: 'üè¢ 18 Medios √önicos',
                    content: `
                        <p><strong>Top 3 por inversi√≥n:</strong></p>
                        <ol>
                            <li>El Mercurio - $72.3M</li>
                            <li>La Tercera - $28.5M</li>
                            <li>Portal Portuario - $6.1M</li>
                        </ol>
                        <p><strong>Mayor frecuencia:</strong> Portal Portuario con 11 publicaciones</p>
                    `
                }
            };
            
            const detail = details[type];
            title.textContent = detail.title;
            body.innerHTML = detail.content;
            modal.classList.add('active');
        }
        
        function showMonthDetail(month) {
            const modal = document.getElementById('detailModal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            title.textContent = `üìÖ Detalle de ${month}`;
            body.innerHTML = `
                <p>An√°lisis detallado del mes seleccionado</p>
                <p><strong>Publicaciones:</strong> Ver datos espec√≠ficos</p>
                <p><strong>Principales medios:</strong> Lista de medios activos</p>
            `;
            modal.classList.add('active');
        }
        
        function showMediaDetail(media) {
            const modal = document.getElementById('detailModal');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            title.textContent = `üì∞ ${media}`;
            body.innerHTML = `
                <p>Informaci√≥n detallada del medio</p>
                <p><strong>Historial de publicaciones</strong></p>
                <p><strong>Tendencia de inversi√≥n</strong></p>
            `;
            modal.classList.add('active');
        }
        
        function closeModal() {
            document.getElementById('detailModal').classList.remove('active');
        }
        
        // Close modal on outside click
        window.onclick = function(event) {
            const modal = document.getElementById('detailModal');
            if (event.target == modal) {
                modal.classList.remove('active');
            }
        }
    </script>
</body>
</html>